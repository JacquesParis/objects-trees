<script type="text/javascript">
  function thumbsShowImg(document, dataNodeId, imageIndex) {
    let images = document.querySelectorAll(
      '#row-imag_{{dataNode.id}} .card-img-top',
    );
    if (0 > imageIndex) {
      imageIndex = images.length - 1;
    }
    if (imageIndex >= images.length) {
      imageIndex = 0;
    }
    document
      .querySelector('#modalImgGal{{dataNode.id}}')
      .setAttribute('data-thumbs-modalIndex', '' + imageIndex);
    document.querySelector(
      '#modalImgGal{{dataNode.id}} .modal-title',
    ).innerHTML = images[imageIndex].getAttribute('data-thumbs-modalTitle');
    document.querySelector('#modalImgGal{{dataNode.id}} .imgFullScreen').style[
      'background-image'
    ] = images[imageIndex].getAttribute('data-thumbs-imgBackground');
  }
</script>
<div class="container">
  <div class="row d-flex justify-content-center" id="row-imag_{{dataNode.id}}">
    {{#dataNode.images}}
    <div class="{{colClass}} d-flex align-items-center">
      <div class="m-2 img-thumbnail">
        <div class="card imgThumb">
          <img
            onclick="thumbsShowImg(document, '{{dataNode.id}}', {{index}})"
            data-toggle="modal"
            data-target="#modalImgGal{{dataNode.id}}"
            class="card-img-top"
            src="{{imgSrc}}"
            alt="{{treeNode.name}}"
            data-thumbs-imgBackground="{{imgBackground}}"
            data-thumbs-modalTitle="{{modalTitle}}"
          />
        </div>
      </div>
    </div>
    {{/dataNode.images}}
  </div>
</div>
<div
  id="modalImgGal{{dataNode.id}}"
  class="modal fade"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myLargeModalLabel"
  aria-hidden="true"
  data-thumbs-modalIndex="0"
>
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        {{^singleImage}}
        <div class="btn-group btn-group-sm" role="group">
          <button
            type="button"
            class="btn btn-secondary"
            onclick="thumbsShowImg(document, '{{dataNode.id}}', Number.parseInt(document.getElementById('modalImgGal{{dataNode.id}}').getAttribute('data-thumbs-modalIndex'))-1)"
          >
            &lt;
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            onclick="thumbsShowImg(document, '{{dataNode.id}}', Number.parseInt(document.getElementById('modalImgGal{{dataNode.id}}').getAttribute('data-thumbs-modalIndex'))+1)"
          >
            &gt;
          </button>
        </div>
        {{/singleImage}}
        <h5 class="modal-title mx-4"></h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <div class="imgFullScreen"></div>
      </div>
    </div>
  </div>
</div>
